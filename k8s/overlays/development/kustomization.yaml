apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: agent-application-development

# Base configuration
bases:
- ../../

# Environment-specific labels
commonLabels:
  environment: development

# Environment-specific annotations
commonAnnotations:
  environment: development
  managed-by: kustomize

# Namespace override
namespace: agent-application-dev

# Replicas for development
replicas:
- name: agent-app
  count: 1

# Resource patches for development
patchesStrategicMerge:
- agent-app-patch.yaml
- postgres-patch.yaml
- redis-patch.yaml

# ConfigMap patches
configMapGenerator:
- name: agent-app-config
  behavior: merge
  literals:
  - SPRING_PROFILES_ACTIVE=development,kubernetes
  - LOGGING_LEVEL_COM_AGENT=DEBUG
  - MANAGEMENT_TRACING_SAMPLING_PROBABILITY=1.0

# Images for development
images:
- name: agent-application
  newTag: dev-latest